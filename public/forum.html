<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Community Forum</title>
    <meta name="description" content="Discuss or ask for help in the community">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="images/Icon.png">

    <!-- ==== CSS ==== -->
    <link rel="stylesheet" type="text/css" href="styles/forum.css">
    <link rel="stylesheet" type="text/css" href="styles/login.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- ==== Boxicons CSS ==== -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  </head>

  <body>
    <nav>
      <div class="nav-bar">
          <span class="logo"><a href="../public/index.html">2024 Help Go Where</a></span>
          
          <div class="menu">
              <ul class="nav-links">
                  <li><a href="../public/forum.html">Forum</a></li>
                  <li><a href="../public/credits.html">Credits</a></li>
              </ul>
          </div>

          <style>
            .nav-links {
                margin-top: 20px; /* Shift the menu down by 20px */
            }
          </style>

          <div class="darkLight-searchBox">
              <div class="dark-light">
                  <i class='bx bx-moon moon'></i>
                  <i class='bx bx-sun sun'></i>
              </div>

              <div class="searchAction">
                  <i class="bx bx-search searchIcon" id="searchIcon"></i>
              </div>

              <div class="loginSignUpAction">
                  <i class='bx bx-user userIcon' id="userIcon"></i>
              </div>

              <div class="menuAction">
                  <i class='bx bx-menu menu' id="menuIcon"></i>
              </div>
          </div>
      </div>
    </nav>

    <div class="search" id="search">
        <form action="" class="searchForm">
            <i class="bx bx-search searchIcon"></i>
            <input type="search" placeholder="What are you looking for?" class="searchInput">
        </form>
    
        <i class="bx bx-x searchClose" id="searchClose"></i>
    </div>

    <div class="login" id="login">
        <form action="" class="loginForm">
            <h2 class="loginTitle">Log In</h2>
            <div class="loginGroup">
                <div>
                    <label for="email" class="loginLabel">Email</label>
                    <input type="email" placeholder="Write your email" id="loginEmail" class="loginInput">
                </div>

                <div>
                    <label for="password" class="loginLabel">Password</label>
                    <input type="password" placeholder="Enter your password" id="loginPassword" class="loginInput">
                </div>

                <div>
                    <p class="loginSignUp">
                        You do not have an account? <a href="javascript:void(0)" id="signUpLink">Sign Up</a></p>

                    <a href="# " class="loginForgot">Forgot password?</a>

                    <button type="submit" class="loginButton">Log In</button>
                </div>
            </div>
        </form>

        <i class="bx bx-x loginClose" id="loginClose"></i>
    </div>

    <div class="signUp" id="signUp">
        <form action="" class="signUpForm">
            <h2 class="signUpTitle">Sign Up</h2>
            <div class="signUpGroup">
                <div>
                    <label for="name" class="loginLabel">Name</label>
                    <input type="name" placeholder="Name" id="signUpName" class="loginInput">
                </div>

                <div>
                    <label for="email" class="loginLabel">Email</label>
                    <input type="email" placeholder="Email" id="signUpEmail" class="loginInput">
                </div>

                <div>
                    <label for="password" class="loginLabel">Password</label>
                    <input type="password" placeholder="Password" id="signUpPassword" class="loginInput">
                </div>

                <div>
                    <label for="confirmPassword" class="loginLabel">Confirm Password</label>
                    <input type="password" placeholder="Confirm Password" id="signUpConfirmPassword" class="loginInput">
                </div>

                <div>
                    <p class="signUpLogin">
                        Already have an account? <a href="javascript:void(0)" id="loginLink">Login</a></p>
                    <button type="submit" class="signUpButton">Sign Up</button>
                </div>
            </div>
        </form>

        <i class="bx bx-x signUpClose" id="signUpClose"></i>
    </div>

    <div class="loggedUser" id="loggedUser">
        <form action="" class="loggedUserForm">
            <h2 class="loggedUserTitle">User Profile</h2>
            <div class="loggedUserTitleGroup">
                <div>
                    <label for="name" class="loggedUserLabel">Name</label>
                    <input type="name" placeholder="Name" id="loggedUserName" class="loggedUserInput" readonly>
                </div>

                <div>
                    <label for="email" class="loggedUserLabel">Email</label>
                    <input type="email" placeholder="Email" id="loggedUserEmail" class="loggedUserInput" readonly>
                </div>

                <div>
                    <button type="submit" class="logOutUserButton">Logout</button>
                </div>
            </div>
        </form>

        <i class="bx bx-x loggedUserClose" id="loggedUserClose"></i>
    </div>

    <div class="sidebar" id="sidebar">
        <i class='bx bx-x menuClose' id="menuClose"></i>
        <ul class="sidebar-links">
            <li><a href="../public/index.html">Home</a></li>
            <li><a href="../public/forum.html">Forum</a></li>
            <li><a href="../public/credits.html">Credits</a></li>
            <li><a href="#">Logout</a></li>
            <i class='bx bx-exit'></i>
        </ul>
    </div>

    <!-- Google Translate element -->
    <div id="google_translate_element"></div>

    <div class="content">
      <div class="container">
        <h1>Community Forum</h1>
        <div class="form-container">
          <button id="create-post-button" style="border: 2px solid #9ca3af; border-radius: 8px; padding: 8px 16px; background: #9ca3af; cursor: pointer;">Create Post</button>
        </div>

        <div id="post-composer" style="display: none;">
          <h2>Create a Post</h2>
          <form id="create-post-form">
              <div class="mb-3">
                  <label for="post-title" class="form-label">Title</label>
                  <input type="text" class="form-control" id="post-title" required>
              </div>
              <div class="mb-3">
                  <label for="post-content" class="form-label">Content</label>
                  <textarea class="form-control" id="post-content" rows="4" required></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
              <button type="button" id="close-post-composer" class="btn btn-secondary">Close</button>
              <br>
              <small class="form-text text-muted">To format posts, use HTML elements like <code>&lt;ol&gt;</code> and <code>&lt;li&gt;</code>.</small>
          </form>
          <br>
      </div>
         <div id="posts-container">
            <!-- Posts will be dynamically inserted here by forum.js -->
         </div>
      </div>
    </div>

    <!-- Edit Post Modal -->
    <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel">Edit Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-post-form">
                        <input type="hidden" id="edit-post-id">
                        <div class="mb-3">
                            <label for="edit-post-title" class="form-label">Title</label>
                            <input type="text" class="form-control" id="edit-post-title" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-post-content" class="form-label">Content</label>
                            <textarea class="form-control" id="edit-post-content" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer-custom">
      <div class="text-center py-3">
        <p>&copy; 2024 Help Go Where</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="scripts/accountSession.js"></script>
    <script type="module" src="scripts/forum.js"></script>

    <!-- Google Translate for website -->
    <script type="text/javascript">
      function googleTranslateElementInit() {
          new google.translate.TranslateElement({
              pageLanguage: 'en',
              autoDisplay: false
          }, 'google_translate_element');
          
          // Apply saved language after initialization
          const savedLanguage = localStorage.getItem('googleTranslateLanguage');
          if (savedLanguage) {
              setTimeout(() => {
                  const translateElement = google.translate.TranslateElement.getInstance();
                  if (translateElement) {
                      translateElement.setEnabled(true);
                      translateElement.setLanguage(savedLanguage);
                  }
              }, 500); // Delay to ensure translate element is fully initialized
          }
      }

      function saveLanguagePreference() {
          const translateElement = google.translate.TranslateElement.getInstance();
          if (translateElement) {
              const selectedLanguage = translateElement.getCurrentLanguage();
              localStorage.setItem('googleTranslateLanguage', selectedLanguage);
          }
      }

      document.addEventListener('DOMContentLoaded', function() {
          // Initialize Google Translate
          googleTranslateElementInit();

          // Save language preference when it changes
          document.addEventListener('change', function(event) {
              if (event.target && event.target.matches('.goog-te-menu2-item')) {
                  saveLanguagePreference();
              }
          });
      });
  </script>

  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script type="module" src="../public/scripts/login.js"></script>
  
  </body>
</html>
