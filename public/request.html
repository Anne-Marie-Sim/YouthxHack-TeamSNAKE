<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Volunteer Assignment</title>
  <link rel="stylesheet" href="./styles/request.css">  
  <!-- Include the latest Firebase SDKs -->
  <script type="module" src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js"></script>  
  <!-- Your custom script -->
  <script type="module" src="./scripts/request.js"></script>
</head>
<body>
  <!-- Google Translate element -->
  <div id="google_translate_element"></div>
  
  <div class="container">
    <h1>Welcome to Volunteer Assistance</h1>
    <p>Click the button below to request a volunteer.</p>
    
    <button id="request-volunteer-btn">Request Volunteer</button>
    
    <div id="volunteer-info" class="volunteer-info">
      <p>No volunteer assigned yet.</p>
    </div>
  </div>

<!-- Google Translate script for website -->
<script type="text/javascript">
  function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'en',
          autoDisplay: false
      }, 'google_translate_element');
      
      // Apply saved language after initialization
      const savedLanguage = localStorage.getItem('googleTranslateLanguage');
      if (savedLanguage) {
          setTimeout(() => {
              const translateElement = google.translate.TranslateElement.getInstance();
              if (translateElement) {
                  translateElement.setEnabled(true);
                  translateElement.setLanguage(savedLanguage);
              }
          }, 500); // Delay to ensure translate element is fully initialized
      }
  }

  function saveLanguagePreference() {
      const translateElement = google.translate.TranslateElement.getInstance();
      if (translateElement) {
          const selectedLanguage = translateElement.getCurrentLanguage();
          localStorage.setItem('googleTranslateLanguage', selectedLanguage);
      }
  }

  document.addEventListener('DOMContentLoaded', function() {
      // Initialize Google Translate
      googleTranslateElementInit();

      // Save language preference when it changes
      document.addEventListener('change', function(event) {
          if (event.target && event.target.matches('.goog-te-menu2-item')) {
              saveLanguagePreference();
          }
      });
  });
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>